/* =========================================================
   Reiteradas - ENEL
   styles.css (cleaned)
   Objetivos:
   - CSS mais curto e consistente (sem blocos repetidos)
   - Visual clean/profissional
   - Modal Alimentadores: nome do conjunto/cidade fixo e opções em linha
========================================================= */

:root{
  /* Base */
  --bg: #f4f6f8;
  --surface: #ffffff;
  --surface-2: #f8fafc;
  --text: #0f172a;      /* slate-900 */
  --muted: #475569;     /* slate-600 */
  --muted-2: #64748b;   /* slate-500 */
  --border: #e2e8f0;    /* slate-200 */

  /* Acento ENEL (azul) */
  --brand: #0b57d0;
  --brand-2: #083b92;
  --brand-soft: rgba(11,87,208,.10);

  /* Estados */
  --success: #10b981;
  --warning: #f59e0b;
  --error: #ef4444;

  /* Raios e sombras */
  --r-lg: 16px;
  --r-md: 12px;
  --r-sm: 10px;

  --shadow-sm: 0 1px 2px rgba(15, 23, 42, 0.06);
  --shadow-md: 0 12px 32px rgba(15, 23, 42, 0.10);
}

*{ box-sizing: border-box; }
html, body{ height: 100%; }
body{
  margin: 0;
  font-family: 'Inter', system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  background: var(--bg);
  color: var(--text);
  line-height: 1.55;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;

  display: flex;
  flex-direction: column;
  min-height: 100vh;
}

.main-content{ flex: 1 0 auto; }
.container{ max-width: 1260px; margin: 0 auto; padding: 0 18px; }

/* =========================================================
   Header
========================================================= */
.header{
  position: sticky;
  top: 0;
  z-index: 50;
  background: rgba(255,255,255,.88);
  backdrop-filter: blur(10px);
  border-bottom: 1px solid var(--border);
  box-shadow: var(--shadow-sm);
  padding: .6rem 0;
}

.header-content{
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  flex-wrap: wrap;
}

.header-left{
  display: flex;
  align-items: center;
  gap: 14px;
  min-width: 0;
}

.header-logo{
  height: clamp(64px, 4.8vw, 92px);
  max-width: 300px;
  object-fit: contain;
  display: block;
}

.header-text{ min-width: 0; }
.header-title{
  margin: 0;
  font-size: clamp(1.05rem, 1.4vw, 1.2rem);
  font-weight: 900;
  letter-spacing: -0.02em;
}

.header-subtitle{
  margin: 0;
  font-size: clamp(.82rem, 1.05vw, .92rem);
  font-weight: 700;
  color: var(--muted);
}

.header-actions{
  display: flex;
  align-items: center;
  gap: 10px;
  margin-left: auto;
  flex-wrap: wrap;
}

@media (max-width: 600px){
  .header-content{ flex-direction: column; align-items: flex-start; }
  .header-actions{ width: 100%; display: grid; grid-template-columns: 1fr 1fr; }
  .header-logo{ height: 62px; max-width: 210px; }
}

/* =========================================================
   Cards / Seções
========================================================= */
.card{
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: var(--r-lg);
  box-shadow: var(--shadow-sm);
  padding: 22px;
  margin: 18px 0;
}

.card:hover{ box-shadow: var(--shadow-md); transition: 140ms ease; }

.section-title{
  margin: 0 0 14px 0;
  padding-bottom: 10px;
  border-bottom: 1px solid var(--border);
  font-size: 1.15rem;
  font-weight: 900;
  display: flex;
  align-items: center;
  gap: 10px;
}

.section-title i{ color: var(--brand); }

/* =========================================================
   Buttons
========================================================= */
.btn{
  border: 1px solid var(--border);
  background: var(--surface);
  color: var(--text);
  border-radius: var(--r-md);
  padding: .65rem .95rem;
  font-weight: 900;
  cursor: pointer;
  display: inline-flex;
  align-items: center;
  gap: 8px;
  text-decoration: none;
  user-select: none;
  box-shadow: var(--shadow-sm);
  transition: 140ms ease;
}

.btn:hover{ background: #eef2f7; transform: translateY(-1px); box-shadow: var(--shadow-md); }
.btn:active{ transform: translateY(0); }

.btn-sm{ padding: .45rem .7rem; font-size: .85rem; border-radius: var(--r-sm); }

.btn-primary{
  background: linear-gradient(180deg, var(--brand), var(--brand-2));
  border-color: rgba(15,23,42,.12);
  color: #fff;
}
.btn-primary:hover{ filter: brightness(1.03); background: linear-gradient(180deg, var(--brand), var(--brand-2)); }

.btn-secondary{ background: var(--surface); }

.btn-dark{
  background: #0f172a;
  border-color: rgba(15,23,42,.2);
  color: #fff;
}
.btn-dark:hover{ filter: brightness(1.03); background: #0f172a; }

.btn-whatsapp{
  background: linear-gradient(180deg, #25D366, #128C7E);
  border-color: rgba(18,140,126,.35);
  color: #fff;
}
.btn-whatsapp:hover{ filter: brightness(1.03); background: linear-gradient(180deg, #25D366, #128C7E); }

/* =========================================================
   Inputs
========================================================= */
input[type="date"],
input[type="text"],
input[type="search"],
select{
  height: 36px;
  border-radius: var(--r-md);
  border: 1px solid var(--border);
  background: var(--surface-2);
  padding: 0 10px;
  color: var(--text);
  font-weight: 700;
  outline: none;
}

input:focus, select:focus{
  border-color: rgba(11,87,208,.55);
  box-shadow: 0 0 0 4px rgba(11,87,208,.12);
  background: #fff;
}

/* =========================================================
   Filtros
========================================================= */
.filter-section{ margin-top: 18px; }
.filter-controls{
  display: flex;
  gap: 12px;
  flex-wrap: wrap;
  align-items: flex-end;
}
.filter-group{ display: flex; flex-direction: column; gap: 6px; }
.filter-group label{ font-weight: 900; color: var(--muted); font-size: .9rem; }

@media (max-width: 768px){
  .filter-controls{ flex-direction: column; align-items: stretch; }
}

/* =========================================================
   Rankings
========================================================= */
.rankings-grid{
  display: grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap: 14px;
}
@media (max-width: 1200px){ .rankings-grid{ grid-template-columns: repeat(2, minmax(0, 1fr)); } }
@media (max-width: 768px){ .rankings-grid{ grid-template-columns: 1fr; } }

.ranking-header{
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
  flex-wrap: wrap;
  margin-bottom: 12px;
}

.ranking-controls{
  width: 100%;
  display: flex;
  gap: 10px;
  align-items: center;
  justify-content: space-between;
  flex-wrap: wrap;
}

.ranking-filters{
  display: flex;
  gap: 8px;
  flex-wrap: nowrap;
  overflow-x: auto;
  -webkit-overflow-scrolling: touch;
  padding-bottom: 2px;
}

.ranking-filters .btn.active{
  background: #0f172a;
  border-color: rgba(15,23,42,.25);
  color: #fff;
}

.ranking-search{ display: flex; gap: 8px; align-items: center; }
.ranking-search input{ min-width: 200px; }

.ranking-list{ display: flex; flex-direction: column; gap: 8px; }

.ranking-scroll{ max-height: 420px; overflow: auto; padding-right: 6px; }

.ranking-item{
  border: 1px solid var(--border);
  border-radius: var(--r-md);
  background: var(--surface);
  padding: 14px 14px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
  cursor: pointer;
  transition: 140ms ease;
}

.ranking-item:hover{ background: #f8fafc; border-color: rgba(11,87,208,.25); }

.ranking-item-position{ font-weight: 950; color: var(--brand); min-width: 52px; text-align: center; }
.ranking-item-name{ flex: 1; font-weight: 900; min-width: 0; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
.ranking-item-count{ font-weight: 950; color: var(--muted); white-space: nowrap; }

/* =========================================================
   Charts
========================================================= */
.chart-block{ display: flex; flex-direction: column; gap: 12px; }
.chart-canvas-wrap{
  height: 280px;
  background: var(--surface-2);
  border: 1px solid var(--border);
  border-radius: var(--r-md);
  padding: 12px;
}

.chart-scroll-list{ max-height: 200px; overflow: auto; padding-right: 6px; display: flex; flex-direction: column; gap: 8px; }

.chart-list-item{
  border: 1px solid var(--border);
  border-radius: var(--r-md);
  background: var(--surface);
  padding: 12px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
  cursor: pointer;
  transition: 140ms ease;
}
.chart-list-item:hover{ background: #f8fafc; border-color: rgba(11,87,208,.25); }

.chart-list-left{ display: flex; align-items: center; gap: 10px; flex: 1; min-width: 0; }
.chart-color-dot{ width: 12px; height: 12px; border-radius: 999px; flex: 0 0 12px; }
.chart-list-name{ flex: 1; min-width: 0; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; font-weight: 900; }
.chart-list-count{ font-weight: 950; color: var(--muted); white-space: nowrap; }

/* =========================================================
   Modal base
========================================================= */
.modal{
  display: none;
  position: fixed;
  inset: 0;
  background: rgba(2, 6, 23, 0.55);
  backdrop-filter: blur(6px);
  z-index: 1000;
}
.modal.active{ display: flex; align-items: center; justify-content: center; padding: 12px; }

.modal-content{
  width: min(900px, 96vw);
  max-height: 92vh;
  overflow: hidden;
  border-radius: var(--r-lg);
  background: var(--surface);
  border: 1px solid var(--border);
  box-shadow: var(--shadow-md);
}

.modal-content.modal-sm{ width: min(520px, 96vw); }

.modal-header{
  background: linear-gradient(180deg, var(--brand), var(--brand-2));
  color: #fff;
  padding: 12px 14px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
}

.modal-header h2{ margin: 0; font-size: 1.02rem; font-weight: 950; }

.modal-header-actions{ display: flex; gap: 8px; flex-wrap: wrap; align-items: center; }

.modal-close{
  width: 40px;
  height: 34px;
  border-radius: 12px;
  border: 1px solid rgba(255,255,255,.25);
  background: rgba(255,255,255,.10);
  color: #fff;
  cursor: pointer;
  display: inline-flex;
  align-items: center;
  justify-content: center;
}
.modal-close:hover{ background: rgba(255,255,255,.18); }

.modal-body{ padding: 14px; overflow: auto; max-height: calc(92vh - 56px); }
.modal-footer{ display: flex; gap: 10px; justify-content: flex-end; margin-top: 14px; padding-top: 12px; border-top: 1px solid var(--border); }

@media (max-width: 600px){
  .modal-header-actions{ width: 100%; justify-content: flex-start; }
}

/* =========================================================
   Detalhes (tabela horizontal)
========================================================= */
.detalhes-table-wrap{ width: 100%; overflow: auto; padding-bottom: 6px; }

.detalhes-table{
  width: 100%;
  border-collapse: separate;
  border-spacing: 0;
  min-width: 980px;
  border: 1px solid var(--border);
  border-radius: var(--r-md);
  overflow: hidden;
}

.detalhes-table thead th{
  position: sticky;
  top: 0;
  z-index: 2;
  background: linear-gradient(180deg, var(--brand), var(--brand-2));
  color: #fff;
  text-align: left;
  padding: 10px 12px;
  font-weight: 950;
  white-space: nowrap;
}

.detalhes-table tbody td{
  padding: 10px 12px;
  border-top: 1px solid var(--border);
  font-weight: 800;
  white-space: nowrap;
}

.detalhes-table tbody tr:hover td{ background: #f8fafc; }

/* Fixar coluna 5 (CLI AFET) na direita */
.detalhes-table thead th:nth-child(5){
  position: sticky;
  right: 0;
  z-index: 5;
  box-shadow: -10px 0 14px rgba(0,0,0,.06);
}
.detalhes-table tbody td:nth-child(5){
  position: sticky;
  right: 0;
  z-index: 3;
  background: var(--surface);
  box-shadow: -10px 0 14px rgba(0,0,0,.04);
}

/* =========================================================
   Toast
========================================================= */
.toast{
  position: fixed;
  bottom: 18px;
  right: 18px;
  background: #0f172a;
  color: #fff;
  border-radius: var(--r-md);
  padding: 12px 14px;
  box-shadow: var(--shadow-md);
  z-index: 2000;
  transform: translateY(200%);
  transition: transform 200ms ease;
  font-weight: 800;
}
.toast.show{ transform: translateY(0); }
.toast.success{ background: #059669; }
.toast.error{ background: #dc2626; }

/* =========================================================
   Footer
========================================================= */
.site-footer{
  margin-top: 18px;
  padding: 14px 0;
  border-top: 1px solid var(--border);
  background: rgba(255,255,255,.78);
  backdrop-filter: blur(10px);
  color: var(--muted);
}

.footer-content{
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
  flex-wrap: wrap;
  font-size: .9rem;
  font-weight: 800;
}

.footer-link{ color: var(--brand-2); text-decoration: none; font-weight: 950; }
.footer-link:hover{ text-decoration: underline; }

.footer-linkedin-icon{
  width: 38px;
  height: 38px;
  border-radius: 12px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  border: 1px solid var(--border);
  background: #f8fafc;
}
.footer-linkedin-icon:hover{ background: #eef2f7; transform: translateY(-1px); }

@media (max-width: 600px){
  .footer-content{ justify-content: center; text-align: center; }
}

/* =========================================================
   Painel Estruturas (abaixo do mapa)
========================================================= */
.estr-panel{
  margin-top: 14px;
  padding: 12px;
  border-radius: var(--r-lg);
  border: 1px solid var(--border);
  background: rgba(255,255,255,0.92);
}

.estr-panel-header{ display:flex; flex-direction:column; gap:10px; }

.estr-title{ font-weight: 950; display:flex; align-items:center; gap:10px; }
.estr-status{ font-size: .9rem; color: var(--muted); font-weight: 900; }

.estr-controls{ display:flex; flex-wrap:wrap; gap:10px; align-items:flex-end; }

.estr-group{ display:flex; flex-direction:column; gap:6px; min-width: 180px; }
.estr-group label{ font-size: .85rem; font-weight: 950; color: var(--muted); }

.estr-check-row{
  display:flex;
  gap:12px;
  align-items:center;
  height: 36px;
  padding: 0 10px;
  border-radius: var(--r-md);
  border: 1px solid var(--border);
  background:#fff;
  font-weight: 900;
}

.estr-panel-body{ margin-top: 10px; }

.estr-list{ max-height: 220px; overflow:auto; padding-right: 6px; display:flex; flex-direction:column; gap:8px; }

.estr-item{
  border: 1px solid var(--border);
  border-radius: var(--r-md);
  padding: 10px 12px;
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap:10px;
  background:#fff;
  cursor:pointer;
}
.estr-item:hover{ background: #f8fafc; border-color: rgba(11,87,208,.25); }

.estr-name{ font-weight: 950; color:#0f172a; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.estr-meta{ font-size: .85rem; font-weight: 900; color: var(--muted); }

.estr-badge{
  font-weight: 950;
  padding: 4px 10px;
  border-radius: 999px;
  border: 1px solid var(--border);
  background: #f8fafc;
  color:#0f172a;
}

.estr-empty{ padding: 16px; text-align:center; font-weight: 900; color: var(--muted); }

/* =========================================================
   Leaflet: evita “mapa escuro / preto”
========================================================= */
#mapaCeara, #mapaCeara *{ filter: none !important; mix-blend-mode: normal !important; }
#mapaCeara canvas{ opacity: 1 !important; }

/* =========================================================
   MODAL ALIMENTADORES (padronizado)
   - Conjunto (bloco) com título em cima
   - Cidade com checkbox ao lado
   - Alimentadores em linha (wrap) abaixo do nome
========================================================= */

/* modal um pouco mais largo */
#modalAlimentadores .modal-content{ width: min(980px, 96vw); }
#modalAlimentadores .modal-body{ padding: 0; background: #f6f8fc; }

/* topbar fixa */
#modalAlimentadores .alim-toolbar{
  position: sticky;
  top: 0;
  z-index: 20;
  background: rgba(246,248,252,.94);
  backdrop-filter: blur(10px);
  border-bottom: 1px solid rgba(0,0,0,.08);
  padding: 12px;
  display: grid;
  grid-template-columns: auto auto 1fr auto;
  gap: 10px;
  align-items: center;
}

#modalAlimentadores .alim-search{ width: 100%; min-width: 0; }
#modalAlimentadores .alim-hint{ grid-column: 1 / -1; color: rgba(0,0,0,.62); font-weight: 900; font-size: .88rem; }

/* lista */
#modalAlimentadores .alim-list{ max-height: 62vh; overflow: auto; padding: 12px; }

#modalAlimentadores .alim-empty{
  padding: 14px;
  font-weight: 900;
  color: var(--muted);
  background: #fff;
  border: 1px dashed rgba(0,0,0,0.18);
  border-radius: var(--r-md);
}

/* bloco (conjunto) */
#modalAlimentadores .alim-block{
  background: #fff;
  border: 1px solid rgba(0,0,0,.10);
  border-radius: var(--r-lg);
  padding: 12px;
  margin-bottom: 12px;
  box-shadow: 0 10px 22px rgba(0,0,0,.06);
}

#modalAlimentadores .alim-block-title{
  font-weight: 950;
  color: rgba(0,0,0,.80);
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 8px;
}
#modalAlimentadores .alim-diamond{ color: var(--brand); }

/* cidade */
#modalAlimentadores .alim-city{ margin-top: 10px; padding-top: 10px; border-top: 1px solid rgba(0,0,0,.06); }

#modalAlimentadores .alim-city-header{
  position: sticky;            /* "nome fixo" durante scroll do modal */
  top: 60px;                   /* abaixo do header+topbar */
  z-index: 10;
  background: #fff;
  border: 1px solid rgba(0,0,0,.08);
  border-radius: var(--r-md);
  padding: 8px 10px;
  margin-bottom: 10px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
}

#modalAlimentadores .alim-city-left{
  display: inline-flex;
  align-items: center;
  gap: 10px;
  font-weight: 950;
  color: rgba(0,0,0,.74);
}
#modalAlimentadores .alim-city-left input{ width: 16px; height: 16px; }

/* ALIMENTADORES EM LISTA HORIZONTAL */
#modalAlimentadores .alim-grid{
  display: flex;               /* <- troca grid por linha */
  flex-wrap: wrap;
  gap: 10px;
}

#modalAlimentadores .alim-chip{
  width: auto;                 /* <- evita virar 1 coluna */
  display: inline-flex;
  align-items: center;
  gap: 10px;
  padding: 8px 10px;
  border-radius: var(--r-md);
  border: 1px solid rgba(0,0,0,.12);
  background: #fff;
  font-weight: 950;
  font-size: .86rem;
  cursor: pointer;
  user-select: none;
}

#modalAlimentadores .alim-chip:hover{ background: rgba(11,87,208,.04); border-color: rgba(11,87,208,.22); }
#modalAlimentadores .alim-chip.is-checked{ border: 2px solid rgba(11,87,208,.55); background: rgba(11,87,208,.08); }

#modalAlimentadores .alim-chip input{ width: 16px; height: 16px; }

#modalAlimentadores .alim-chip span{
  white-space: nowrap;
}

/* responsivo topbar */
@media (max-width: 720px){
  #modalAlimentadores .alim-toolbar{ grid-template-columns: 1fr 1fr; }
  #modalAlimentadores .alim-toolbar .alim-search{ grid-column: 1 / -1; }
  #modalAlimentadores .alim-toolbar .alim-confirm{ grid-column: 1 / -1; width: 100%; justify-content: center; }
  #modalAlimentadores .alim-city-header{ top: 98px; }
}

/* =========================================================
   Scrollbars (opcional)
========================================================= */
*::-webkit-scrollbar{ width: 10px; height: 10px; }
*::-webkit-scrollbar-thumb{ background: #cbd5e1; border-radius: 999px; border: 2px solid #f1f5f9; }
*::-webkit-scrollbar-track{ background: #f1f5f9; }
